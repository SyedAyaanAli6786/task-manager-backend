# ----------------------------------------------------
# 1. Base image (small + secure)
# ----------------------------------------------------
    FROM node:18-alpine

    # ----------------------------------------------------
    # 2. Set working directory
    # ----------------------------------------------------
    WORKDIR /app
    
    # ----------------------------------------------------
    # 3. Copy dependency files first (for caching)
    # ----------------------------------------------------
    COPY package*.json ./
    
    # ----------------------------------------------------
    # 4. Install dependencies
    # ----------------------------------------------------
    RUN npm ci --only=production
    
    # ----------------------------------------------------
    # 5. Copy application source
    # ----------------------------------------------------
    COPY . .
    
    # ----------------------------------------------------
    # 6. Expose application port
    # ----------------------------------------------------
    EXPOSE 3000
    
    # ----------------------------------------------------
    # 7. Start the application
    # ----------------------------------------------------
    CMD ["npm", "start"]
    